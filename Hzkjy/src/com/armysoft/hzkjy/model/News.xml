<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="NewsOpt">

	<!-- 表列名 -->
	<sql id="columns">	
	case when Zt='1' then '在园' else '出园' end ZtName, ID ,Hybh ,Qymc ,Qymcpy ,Address ,Zydy ,Mj ,Fzr,Zczj,Lxr,Zt</sql>
	<!-- 通用条件sql语句 -->
	<sql id="condition" >
		from member_basic 
		where 1 = 1	 and Zt = '0'
		<if test="parm.fhymc != null and parm.fhymc != ''">
		and a.hymc  like CONCAT('%', #{parm.fhymc}, '%')
		</if>
	</sql>
	

    <select id="findById" resultMap="memberFasicMap" parameterType="Long">
		select * from member_basic where id = #{id}
	</select>
	

	
		
	<select id="page" resultMap="memberFasicMap" parameterType="java.util.Map">
		select 
		<include refid="columns"/>
		<include refid="condition" />
		limit #{pager.startRowNumber}, #{pager.pageSize}
	</select>
	<select id="pageCount" resultType="int" parameterType="java.util.Map">
		select count(*) 
		<include refid="condition" />
	</select>
	<!-- 保存 -->
	<insert id="insert" parameterType="memberFasic">
		insert into member_basic(Hybh,Qymc,Address,Zydy,Mj,Fzr,Zczj,Lxr,Zt,Qymcpy)
		values(#{hybh} 		
		, #{qymc} 		
		, #{address} 		
		,       #{zydy}
		 ,		#{mj}
		 ,		#{fzr}
		 ,		#{zczj}
		 ,		#{lxr}
		 ,		#{zt}
		 ,		#{qymcpy}
		  )
		</insert>

	<!-- 修改 -->
	<update id="update" parameterType="memberFasic">
		update member_basic set 
		Hybh=#{hybh}
		 								,Qymc=#{qymc}
		 								,Address=#{address}
											,	Zydy=#{zydy}
		 								,		Mj=#{mj}
		 								,		Fzr=#{fzr}
		 								,		Zczj=#{zczj}
		 								,		Lxr=#{lxr}
		 								,		Zt=#{zt}
		 								,		Qymcpy=#{qymcpy}
		 							where ID = #{id}
	</update>

	<!-- 删除 -->
	<delete id="delete" parameterType="Long">
		delete from member_basic where ID = #{ID}
	</delete>
	
	<!-- ********************************************* -->

</mapper>